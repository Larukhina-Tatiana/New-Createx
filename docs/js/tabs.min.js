!function(){const t=6;let e=1;const o=document.querySelector(".portfolio-tabs-nav"),a=document.querySelectorAll(".portfolio-tabs-nav__btn"),n=document.querySelector(".portfolio-more");function l(o,l=!0){if(console.log(`▶️ Активируем вкладку: ${o}`),e=1,l){const t=document.querySelector(".tabs-content"),e=document.querySelector(".portfolio-tabs-nav");if(t){const o=(parseInt(getComputedStyle(document.documentElement).getPropertyValue("--header-height"))||0)+(e?.offsetHeight||0),a=t.getBoundingClientRect().top+window.scrollY-o;window.scrollTo({top:a,behavior:"smooth"})}}const s=document.querySelector(`.portfolio-tabs-nav__btn[data-path="${o}"]`);s&&(a.forEach((t=>t.classList.remove("portfolio-tabs-nav__btn--active"))),s.classList.add("portfolio-tabs-nav__btn--active"),function(e){const o=document.querySelectorAll(".tabs-content__item"),a="all"===e?Array.from(o):Array.from(document.querySelectorAll(`[data-target="${e}"]`)).map((t=>t.closest(".tabs-content__item"))).filter(Boolean);o.forEach((t=>{t.classList.remove("item--visible"),t.classList.add("item--hidden"),t.style.display="none"})),a.slice(0,t).forEach((t=>{t.style.display="block",requestAnimationFrame((()=>{t.classList.remove("item--hidden"),t.classList.add("item--visible")}))})),n&&(n.style.display=a.length>t?"inline-flex":"none")}(o))}function s(){let t=window.location.hash.replace("#","");if(t||(t=new URLSearchParams(window.location.search).get("tab")),t||(t=sessionStorage.getItem("tab"),sessionStorage.removeItem("tab")),!t)return void l("all",!1);let e=0;const o=()=>{const a=document.querySelector(`.portfolio-tabs-nav__btn[data-path="${t}"]`),n=document.querySelectorAll(`[data-target="${t}"]`);a&&n.length>0?l(t,!0):e<30?(e++,setTimeout(o,100)):console.warn(`❌ Вкладка "${t}" не найдена — не активируем "all"`)};o()}n&&n.addEventListener("click",(()=>{const o=document.querySelector(".portfolio-tabs-nav__btn--active")?.dataset.path;if(!o)return;const a="all"===o?Array.from(document.querySelectorAll(".tabs-content__item")):Array.from(document.querySelectorAll(`[data-target="${o}"]`)).map((t=>t.closest(".tabs-content__item"))).filter(Boolean),l=e*t,s=l+t;a.slice(l,s).forEach(((t,e)=>{t.style.display="block",setTimeout((()=>{t.classList.remove("item--hidden"),t.classList.add("item--visible")}),100*e)})),e++,s>=a.length&&(n.style.display="none")})),o&&o.addEventListener("click",(t=>{const e=t.target.closest(".portfolio-tabs-nav__btn");e&&(l(e.dataset.path),history.pushState(null,"",`#${e.dataset.path}`))})),window.addEventListener("popstate",(()=>{console.log("🔄 popstate: проверяем хеш"),s()})),window.initTabs=()=>{},window.initTabFromURL=s}();