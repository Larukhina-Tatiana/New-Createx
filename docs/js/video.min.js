const videoBlock=document.querySelector(".video__block");if(videoBlock){const e=document.querySelector("video");e.addEventListener("canplay",(()=>{e.muted=!1}));const t=videoBlock.querySelector(".video__button");if(e&&t){let o;function playVideo(r=!1){if(r||e.ended)e.currentTime=0;else{const t=localStorage.getItem("videoplayer-current-time");t&&(e.currentTime=parseFloat(t))}e.play().then((()=>{e.controls=!0,videoBlock.classList.add("video__block--played"),t.classList.add("video__button--played"),t.setAttribute("aria-pressed","true"),t.style.display="none",o=setInterval((()=>{localStorage.setItem("videoplayer-current-time",e.currentTime)}),5e3)})).catch((e=>{console.warn("⛔️ Не удалось запустить видео:",e)}))}function pauseVideo(){e.pause(),e.controls=!1,videoBlock.classList.remove("video__block--played"),t.classList.remove("video__button--played"),t.setAttribute("aria-pressed","false"),t.style.display="flex",clearInterval(o),localStorage.setItem("videoplayer-current-time",e.currentTime)}function resetVideoProgress(){localStorage.removeItem("videoplayer-current-time")}t.addEventListener("click",(()=>{try{e.muted=!1,e.currentTime=0,e.play(),e.controls=!0,videoBlock.classList.add("video__block--played"),t.classList.add("video__button--played"),t.setAttribute("aria-pressed","true"),t.style.display="none",o=setInterval((()=>{localStorage.setItem("videoplayer-current-time",e.currentTime)}),5e3)}catch(e){console.warn("Firefox блокирует воспроизведение:",e)}})),e.addEventListener("click",(()=>{e.paused||pauseVideo()})),e.addEventListener("pause",pauseVideo),e.addEventListener("ended",(()=>{resetVideoProgress(),t.style.display="flex",t.classList.remove("video__button--played"),e.controls=!1})),window.addEventListener("visibilitychange",(()=>{"hidden"!==document.visibilityState||e.ended||localStorage.setItem("videoplayer-current-time",e.currentTime)}))}}